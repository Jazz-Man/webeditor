var AppExplainer = function (t) {
    this.proc = t ? t : [];
    var n = 0, o = this;
    this.add = function (t, n, o, e, r, i, l, c) {
        this.proc.push({el: t, title: n, html: o, hl: e, other: r, on: i, off: l, delay: c})
    }, this.play = function () {
        a()
    };
    var e = function () {
        return o.proc.length > n ? o.proc[n] : null
    }, r = function () {
        u(), o.proc.length > n + 1 && n++, a()
    }, i = function () {
        u(), n > 0 && n--, a()
    }, l = function () {
        return 0 == n
    }, c = function () {
        return n == o.proc.length - 1
    }, u = function () {
        var t = e();
        t.off && t.off(t);
        var n = p(t.el), o = t.other ? p(t.other) : null;
        n.removeClass(t.cls), o && o.removeClass("appex-border")
    }, a = function (t) {
        var o = e();
        if (o.delay && !t)return setTimeout(function () {
            a(!0)
        }, o.delay), void 0;
        o.on && o.on(o);
        var s = p(o.el), f = o.other ? p(o.other) : null, h = "appex-" + (o.hl ? o.hl : "border");
        o.cls = h, s.addClass(h), f && f.addClass("appex-border");
        {
            var d = "function" == typeof o.html ? o.html(o) : o.html, v = s.first(), b = "appex-item-" + n;
            v.popover({
                html: !0,
                placement: "auto",
                trigger: "manual",
                title: o.title,
                container: "body",
                content: '<div id="' + b + '"><div>' + d + '</div><button class="prev btn-link">Back</button><button class="next btn">Next</button><button class="closeit btn btn-link">Cancel</button></div>'
            }).on("shown.bs.popover", function () {
                var t = $("#" + b), n = t.find("button.prev"), o = t.find("button.next"), e = t.find("button.closeit");
                l() && n.hide(), c() && (o.html("Done"), e.hide()), n.on("click", function (t) {
                    t.preventDefault(), u(), i(), v.popover("destroy")
                }), o.on("click", function (t) {
                    t.preventDefault(), u(), c() || r(), v.popover("destroy")
                }), e.on("click", function (t) {
                    u(), v.popover("destroy"), t.preventDefault()
                })
            })
        }
        v.popover("show")
    }, p = function (t) {
        switch (typeof t) {
            case"string":
                return $(t);
            case"object":
                return t;
            case"function":
                return t()
        }
    }
};